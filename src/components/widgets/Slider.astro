---
import WidgetWrapper from '~/components/ui/WidgetWrapper.astro';
import { Icon } from 'astro-icon/components';

const { images = [], id, classes = {}, arrows = true, bg = await Astro.slots.render('bg') } = Astro.props;
---

<WidgetWrapper id={id} containerClass={`px-4 lg:px-6 lg:px-8 py-10 ${classes?.container ?? ''}`} bg={bg}>
  <div
    data-hs-carousel='{
      "loadingClasses": "opacity-0",
      "dotsItemClasses": "hs-carousel-active:bg-blue-700 hs-carousel-active:border-blue-700 size-3 border border-gray-400 rounded-full cursor-pointer",
      "isAutoPlay": true,
      "isAutoHeight": false,
      "isCentered": false,
      "isDraggable": true,
      "slidesQty": {
        "xs": 1,
        "md": 1,
        "lg": 2
      }
    }'
    class="relative" >
    <div class="hs-carousel relative overflow-hidden w-full h-[30rem] md:h-[calc(100vh-106px)] bg-gray-100 rounded-2xl dark:bg-neutral-800">
      <div class="hs-carousel-body absolute top-0 bottom-0 start-0 flex flex-nowrap transition-transform duration-700 opacity-0">
        {          
          images &&
            images.map(({ url, description }) => (
            
              <div class="hs-carousel-slide">
                <div class="h-[30rem] md:h-[calc(100vh-106px)] flex flex-col bg-cover bg-center bg-no-repeat"
                style={{backgroundImage: `url('${url}')`}}>
                  {description && (
                    <div class="mt-auto w-2/3 md:max-w-lg ps-5 pb-5 md:ps-10 md:pb-10">
                      <span class="block text-white">Nike React</span>
                      <span class="block text-white text-xl md:text-3xl">
                        Rewriting sport's playbook for billions of athletes
                      </span>
                      <div class="mt-5">
                        <a
                          class="py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-xl bg-white border border-transparent text-black hover:bg-gray-100 focus:outline-none focus:bg-gray-100 disabled:opacity-50 disabled:pointer-events-none"
                          href="#"
                        >
                          Read Case Studies
                        </a>
                      </div>
                    </div>
                  )}
                </div>
              </div>
            ))
        }
      </div>
    </div>
    {
      arrows && (        
          <button
            type="button"
            class="hs-carousel-prev hs-carousel-disabled:opacity-50 disabled:pointer-events-none absolute inset-y-0 start-0 inline-flex justify-center items-center w-12 h-full text-black hover:bg-white/20 rounded-s-2xl focus:outline-none focus:bg-white/20"
          >
            <span class="text-2xl" aria-hidden="true">
              <Icon
                name="tabler:circle-arrow-left"
                class="flex-shrink-0 mt-1 text-primary w-6 h-6 mr-2 rtl:mr-0 rtl:ml-2"
              />
            </span>
            <span class="sr-only">Previous</span>
          </button>
          <button
            type="button"
            class="hs-carousel-next hs-carousel-disabled:opacity-50 disabled:pointer-events-none absolute inset-y-0 end-0 inline-flex justify-center items-center w-12 h-full text-black hover:bg-white/20 rounded-e-2xl focus:outline-none focus:bg-white/20"
          >
            <span class="sr-only">Next</span>
            <span class="text-2xl" aria-hidden="true">
              <Icon
                name="tabler:circle-arrow-right"
                class="flex-shrink-0 mt-1 text-primary w-6 h-6 mr-2 rtl:mr-0 rtl:ml-2"
              />
            </span>
          </button>        
      )
    }
    <!-- Pagination -->
    <div class="hs-carousel-pagination flex justify-center absolute bottom-3 start-0 end-0 space-x-2"></div>
  </div>
</WidgetWrapper>
